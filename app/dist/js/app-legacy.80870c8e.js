(function(){"use strict";var t={4235:function(t,e,n){n.r(e)},1588:function(t,e,n){n(6992),n(8674),n(9601),n(7727),n(7327),n(1539);var r=n(9200),i=n(6252),s=n(3577),o=n(9963),a={class:"is-flex is-flex-direction-column",style:{height:"100vh"}},c={class:"navbar is-primary is-flex is-align-items-center is-size-5"},u={class:"navbar-brand"},l=(0,i._)("a",{class:"navbar-item is-size-5",href:"/"}," Home ",-1),d=["href"],p={class:"navbar-item is-size-5"},m=(0,i._)("div",{class:"navbar-menu"},[(0,i._)("div",{class:"navbar-start"}),(0,i._)("div",{class:"navbar-end"})],-1),h={class:"container.is-fullhd is-flex is-align-items-center is-flex-direction-column my-auto"},f={class:"block is-flex is-flex-direction-row"},v={class:"block px-auto",style:{width:"100%"}},b={class:"hero is-primary"},w={class:"hero-body"},g={class:"container is-flex is-align-items-center is-justify-content-center"},y={class:"block"};function I(t,e,n,r,I,S){var _,D=(0,i.up)("CounterComponent"),x=(0,i.up)("Timer"),C=(0,i.up)("ProblemComponent"),k=(0,i.up)("InputNumber"),R=(0,i.up)("StartButton");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("nav",c,[(0,i._)("div",u,[l,(0,i._)("a",{class:"navbar-item is-size-5",href:t.personId?"/stats?personId="+t.personId:"/stats"}," Stats ",8,d),(0,i._)("p",p,(0,s.zw)(null===(_=this.personId)||void 0===_?void 0:_.substring(0,15)),1)]),m]),(0,i._)("div",h,[(0,i.wy)((0,i._)("div",f,[(0,i.Wm)(D,{class:"mr-4",correct:t.correct},null,8,["correct"]),(0,i.Wm)(x,{ref:"timer",onActiveEnded:S.stop,remainingSeconds:t.remainingSeconds},null,8,["onActiveEnded","remainingSeconds"])],512),[[o.vShow,t.playing]]),(0,i.wy)((0,i._)("div",v,[(0,i._)("section",b,[(0,i._)("div",w,[(0,i._)("div",g,[(0,i.Wm)(C,{ref:"problem"},null,512),(0,i.Wm)(k,{ref:"inputAnswer",modelValue:t.answer,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.answer=e}),solution:t.solution,inputDisabled:t.inputDisabled,placeholder:"",onInputUpdated:S.checkAnswer},null,8,["modelValue","solution","inputDisabled","onInputUpdated"])])])])],512),[[o.vShow,t.playing]]),(0,i.wy)((0,i._)("div",y,[(0,i.Wm)(R,{ref:"startButton",onClicked:S.start},null,8,["onClicked"])],512),[[o.vShow,!t.playing]])])])}var S=n(8534),_=(n(5666),n(2222),n(4916),n(5306),["placeholder","disabled"]);function D(t,e,n,r,s,o){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("input",(0,i.dG)({class:"input is-small is-size-5 has-text-centered ml-4 is-info",ref:"inputField",type:"number",id:"ftext"},n.value,{onKeyup:e[0]||(e[0]=function(t){return o.updateValue(t.target.value)}),placeholder:n.placeholder,disabled:t.inputDisabled}),null,16,_)])}var x={name:"InputNumber",props:["value","placeholder"],data:function(){return{inputDisabled:!0}},emits:["inputUpdated"],methods:{updateValue:function(t){this.$emit("inputUpdated",t)},resetInput:function(){this.$refs.inputField.value=""},setInputFieldDisabled:function(){this.inputDisabled=!0},setInputFieldActive:function(){var t=this;this.inputDisabled=!1,(0,i.Y3)((function(){t.$refs.inputField.focus()}))}}},C=n(3744);const k=(0,C.Z)(x,[["render",D],["__scopeId","data-v-65f5e039"]]);var R=k,z={class:"is-size-4"};function P(t,e,n,r,o,a){return(0,i.wg)(),(0,i.iD)("h1",z," Correct: "+(0,s.zw)(n.correct),1)}var M={name:"CounterComponent",props:["correct"]};const T=(0,C.Z)(M,[["render",P]]);var O=T,$={class:"is-size-4"};function Z(t,e,n,r,o,a){return(0,i.wg)(),(0,i.iD)("h1",$,(0,s.zw)(t.problem)+" = ",1)}var j={name:"ProblemComponent",data:function(){return{problem:null}},methods:{setNewProblem:function(){var t=Math.floor(4*Math.random());console.log(t);var e=1+Math.ceil(100*Math.random());if(0==t){var n=1+Math.ceil(100*Math.random());return this.problem="".concat(n," + ").concat(e),n+e}if(1==t){var r=1+Math.ceil(100*Math.random());return this.problem="".concat(r+e," - ").concat(e),r}if(2==t){var i=1+Math.ceil(12*Math.random());return this.problem="".concat(i," x ").concat(e),i*e}if(3==t){var s=1+Math.ceil(12*Math.random());return this.problem="".concat(s*e," / ").concat(s),e}}}};const N=(0,C.Z)(j,[["render",Z]]);var A=N,B=["hidden"],F=["disabled"],E=(0,i._)("span",null,"Start",-1),U=[E];function W(t,e,n,r,s,o){return(0,i.wg)(),(0,i.iD)("div",{hidden:t.inputDisabled},[(0,i._)("button",{class:"button is-primary is-responsive is-size-3",onClick:e[0]||(e[0]=function(){return o.onClick&&o.onClick.apply(o,arguments)}),disabled:t.inputDisabled},U,8,F)],8,B)}var V={name:"StartButton",data:function(){return{inputDisabled:!1}},methods:{onClick:function(){this.$emit("clicked")},setStartButtonDisabled:function(){this.inputDisabled=!0},setStartButtonEnabled:function(){this.inputDisabled=!1}},emits:["clicked"]};const G=(0,C.Z)(V,[["render",W]]);var H=G,K={class:"timer is-size-4"};function Y(t,e,n,r,o,a){return(0,i.wg)(),(0,i.iD)("h1",K," Remaining: "+(0,s.zw)(t.remainingSeconds),1)}var L={name:"TimerComponent",data:function(){return{remainingSeconds:null,timer:null}},emits:["activeEnded"],methods:{start:function(){var t=this;clearInterval(this.timer),this.remainingSeconds=60,this.timer=setInterval((function(e){e.remainingSeconds--,0===e.remainingSeconds&&(clearInterval(t.timer),t.$emit("activeEnded"))}),1e3,this)}}};const q=(0,C.Z)(L,[["render",Y]]);var J=q,Q={name:"App",components:{CounterComponent:O,InputNumber:R,ProblemComponent:A,StartButton:H,Timer:J},data:function(){return{answer:0,solution:1337,correct:0,remainingSeconds:null,inputDisabled:!0,personId:null,personDisplayName:null,mostRecentStats:[],topStatsToday:[],playing:!1}},methods:{checkAnswer:function(t){this.answer=t,this.answer==this.solution&&(this.answer="",this.correct++,this.setNewProblem())},setNewProblem:function(){var t;this.solution=null===(t=this.$refs.problem)||void 0===t?void 0:t.setNewProblem(),this.$refs.inputAnswer.resetInput()},stop:function(){var t=(0,S.Z)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.playing=!1,null===(e=this.$refs.inputAnswer)||void 0===e||e.setInputFieldDisabled(),this.$refs.startButton.setStartButtonEnabled(),console.log("Game is over."),!this.personId){t.next=9;break}return t.next=7,this.saveScore();case 7:return t.next=9,this.$refs.stats.fetchScore(this.personId,30);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),start:function(){var t=(0,S.Z)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("Game is starting."),this.playing=!0,this.correct=0,this.$refs.timer.start(),null===(e=this.$refs.inputAnswer)||void 0===e||e.setInputFieldActive(),this.$refs.startButton.setStartButtonDisabled(),this.setNewProblem();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),saveScore:function(){var t=(0,S.Z)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Saving score... for ".concat(this.personId)),t.next=3,fetch("api/"+"postStatistics?person=".concat(this.personId,"&result=").concat(this.correct),{method:"POST"});case 3:e=t.sent,console.log(e.status),console.log("Saved."),window.location.replace("/stats?personId=".concat(this.personId));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=(0,S.Z)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/.auth/me");case 2:return e=t.sent,t.next=5,e.json();case 5:if(n=t.sent,n&&n.clientPrincipal){t.next=10;break}return console.log("No user logged in."),window.location.replace("/.auth/login/aad"),t.abrupt("return");case 10:console.log(n),this.personId=n.clientPrincipal.userId,this.personDisplayName=n.clientPrincipal.userDetails,console.log(this.personId);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()};const X=(0,C.Z)(Q,[["render",I]]);var tt=X,et=function(t){return(0,i.dD)("data-v-07767462"),t=t(),(0,i.Cn)(),t},nt={class:"navbar is-primary is-flex is-align-items-center is-size-5"},rt={class:"navbar-brand"},it=et((function(){return(0,i._)("a",{class:"navbar-item",href:"/"}," Home ",-1)})),st=["href"],ot={class:"navbar-item"},at=et((function(){return(0,i._)("div",{class:"navbar-menu"},[(0,i._)("div",{class:"navbar-start"}),(0,i._)("div",{class:"navbar-end"})],-1)}));function ct(t,e,n,r,o,a){var c,u=(0,i.up)("TableComponent");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("nav",nt,[(0,i._)("div",rt,[it,(0,i._)("a",{class:"navbar-item",href:t.personId?"/stats?personId="+t.personId:"/stats"}," Stats ",8,st),(0,i._)("p",ot,(0,s.zw)(null===(c=this.personId)||void 0===c?void 0:c.substring(0,15)),1)]),at]),(0,i._)("div",null,[(0,i.Wm)(u,{ref:"stats",title:"Your recent scores",personId:t.personId,stats:t.mostRecentStats},null,8,["personId","stats"])])])}n(8783),n(3948),n(1637),n(4765);var ut={id:"table",class:"mt-2 container"},lt={class:"column is-6",style:{width:"fit-content"}},dt={class:"column is-6"};function pt(t,e,n,r,a,c){return(0,i.wg)(),(0,i.iD)("div",ut,[(0,i.wy)((0,i._)("div",null," No results found ",512),[[o.vShow,0===t.stats.length&&t.fetched]]),(0,i._)("section",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.stats,(function(t){return(0,i.wg)(),(0,i.iD)("div",{key:t.RowKey,class:"is-size-4 columns is-mobile is-centered mt-4",style:(0,s.j5)({color:"rgb("+Math.max(0,255-10*parseInt(t.Result["_"]))+","+Math.min(255,10*parseInt(t.Result["_"]))+",0)"})},[(0,i._)("div",lt,(0,s.zw)(new Date(t.Timestamp["_"]).getDate()+"/"+(parseInt(new Date(t.Timestamp["_"]).getMonth())+1))+" : ",1),(0,i._)("div",dt,(0,s.zw)(t.Result["_"]),1)],4)})),128))])])}n(2707);var mt={name:"TableComponent",components:{},props:{personId:{type:String,default:""},showLink:{type:Boolean,default:!1}},data:function(){return{stats:[],fetched:!1}},methods:{fetchScore:function(){var t=(0,S.Z)(regeneratorRuntime.mark((function t(e){var n,r,i,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:30,console.log("Fetching score for ".concat(e," ...")),t.next=4,fetch("api/"+"getStatistics?person=".concat(e,"&numberOfDays=").concat(n));case 4:return r=t.sent,t.next=7,r.json();case 7:i=t.sent,this.stats=i.sort((function(t,e){return Date.parse(e.Timestamp["_"])-Date.parse(t.Timestamp["_"])})),this.fetched=!0,console.log("Fetched.");case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}};const ht=(0,C.Z)(mt,[["render",pt],["__scopeId","data-v-644e744b"]]);var ft=ht,vt={name:"StatsComponent",components:{TableComponent:ft},data:function(){return{mostRecentStats:[],waitSeconds:5,personId:"",timer:null}},methods:{start:function(){var t=this;clearInterval(this.timer),this.waitSeconds=1,this.timer=setInterval((function(e){e.waitSeconds--,0===e.waitSeconds&&(clearInterval(t.timer),t.$refs.stats.fetchScore(t.personId,100))}),1e3,this)}},mounted:function(){this.personId=new URLSearchParams(window.location.search).get("personId"),this.personId&&this.$refs.stats.fetchScore(this.personId,100)}};const bt=(0,C.Z)(vt,[["render",ct],["__scopeId","data-v-07767462"]]);var wt=bt;n(4235);var gt={template:"<p>Page not found</p>"},yt=[{path:"/",component:tt},{path:"/stats",component:wt}],It={data:function(){return{currentRoute:window.location.pathname}},computed:{CurrentComponent:function(){var t=this;return yt.filter((function(e){return t.currentRoute==e.path}))[0].component||gt}},render:function(){return(0,r.h)(this.CurrentComponent)}};(0,r.ri)(It).mount("#app")}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,s){if(!r){var o=1/0;for(l=0;l<t.length;l++){r=t[l][0],i=t[l][1],s=t[l][2];for(var a=!0,c=0;c<r.length;c++)(!1&s||o>=s)&&Object.keys(n.O).every((function(t){return n.O[t](r[c])}))?r.splice(c--,1):(a=!1,s<o&&(o=s));if(a){t.splice(l--,1);var u=i();void 0!==u&&(e=u)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[r,i,s]}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,s,o=r[0],a=r[1],c=r[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)var l=c(n)}for(e&&e(r);u<o.length;u++)s=o[u],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(l)},r=self["webpackChunkmath"]=self["webpackChunkmath"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(1588)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.80870c8e.js.map