(function(){"use strict";var t={235:function(t,e,n){n.r(e)},588:function(t,e,n){var s=n(200),i=n(252),o=n(577),r=n(963);const a={class:"is-flex is-flex-direction-column",style:{height:"100vh"}},l={class:"navbar is-primary is-flex is-align-items-center is-size-5"},c={class:"navbar-brand"},u=(0,i._)("a",{class:"navbar-item is-size-5",href:"/"}," Home ",-1),d=["href"],p={class:"navbar-item is-size-5"},m=(0,i._)("div",{class:"navbar-menu"},[(0,i._)("div",{class:"navbar-start"}),(0,i._)("div",{class:"navbar-end"})],-1),h={class:"container.is-fullhd is-flex is-align-items-center is-flex-direction-column my-auto"},f={class:"block is-flex is-flex-direction-row"},v={class:"block px-auto",style:{width:"100%"}},b={class:"hero is-primary"},w={class:"hero-body"},g={class:"container is-flex is-align-items-center is-justify-content-center"},I={class:"block"};function y(t,e,n,s,y,S){const _=(0,i.up)("CounterComponent"),D=(0,i.up)("Timer"),$=(0,i.up)("ProblemComponent"),C=(0,i.up)("InputNumber"),k=(0,i.up)("StartButton");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("nav",l,[(0,i._)("div",c,[u,(0,i._)("a",{class:"navbar-item is-size-5",href:t.personId?"/stats?personId="+t.personId:"/stats"}," Stats ",8,d),(0,i._)("p",p,(0,o.zw)(this.personId?.substring(0,15)),1)]),m]),(0,i._)("div",h,[(0,i.wy)((0,i._)("div",f,[(0,i.Wm)(_,{class:"mr-4",correct:t.correct},null,8,["correct"]),(0,i.Wm)(D,{ref:"timer",onActiveEnded:S.stop,remainingSeconds:t.remainingSeconds},null,8,["onActiveEnded","remainingSeconds"])],512),[[r.vShow,t.playing]]),(0,i.wy)((0,i._)("div",v,[(0,i._)("section",b,[(0,i._)("div",w,[(0,i._)("div",g,[(0,i.Wm)($,{ref:"problem"},null,512),(0,i.Wm)(C,{ref:"inputAnswer",modelValue:t.answer,"onUpdate:modelValue":e[0]||(e[0]=e=>t.answer=e),solution:t.solution,inputDisabled:t.inputDisabled,placeholder:"",onInputUpdated:S.checkAnswer},null,8,["modelValue","solution","inputDisabled","onInputUpdated"])])])])],512),[[r.vShow,t.playing]]),(0,i.wy)((0,i._)("div",I,[(0,i.Wm)(k,{ref:"startButton",onClicked:S.start},null,8,["onClicked"])],512),[[r.vShow,!t.playing]])])])}const S=["placeholder","disabled"];function _(t,e,n,s,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("input",(0,i.dG)({class:"input is-small is-size-5 has-text-centered ml-4 is-info",ref:"inputField",type:"number",id:"ftext"},n.value,{onKeyup:e[0]||(e[0]=t=>r.updateValue(t.target.value)),placeholder:n.placeholder,disabled:t.inputDisabled}),null,16,S)])}var D={name:"InputNumber",props:["value","placeholder"],data:function(){return{inputDisabled:!0}},emits:["inputUpdated"],methods:{updateValue:function(t){this.$emit("inputUpdated",t)},resetInput:function(){this.$refs.inputField.value=""},setInputFieldDisabled:function(){this.inputDisabled=!0},setInputFieldActive:function(){this.inputDisabled=!1,(0,i.Y3)((()=>{this.$refs.inputField.focus()}))}}},$=n(744);const C=(0,$.Z)(D,[["render",_],["__scopeId","data-v-65f5e039"]]);var k=C;const x={class:"is-size-4"};function z(t,e,n,s,r,a){return(0,i.wg)(),(0,i.iD)("h1",x," Correct: "+(0,o.zw)(n.correct),1)}var P={name:"CounterComponent",props:["correct"]};const M=(0,$.Z)(P,[["render",z]]);var T=M;const O={class:"is-size-4"};function j(t,e,n,s,r,a){return(0,i.wg)(),(0,i.iD)("h1",O,(0,o.zw)(t.problem)+" = ",1)}var N={name:"ProblemComponent",data:function(){return{problem:null}},methods:{setNewProblem:function(){let t=Math.floor(4*Math.random());console.log(t);let e=1+Math.ceil(100*Math.random());if(0==t){let t=1+Math.ceil(100*Math.random());return this.problem=`${t} + ${e}`,t+e}if(1==t){let t=1+Math.ceil(100*Math.random());return this.problem=`${t+e} - ${e}`,t}if(2==t){let t=1+Math.ceil(12*Math.random());return this.problem=`${t} x ${e}`,t*e}if(3==t){let t=1+Math.ceil(12*Math.random());return this.problem=`${t*e} / ${t}`,e}}}};const A=(0,$.Z)(N,[["render",j]]);var B=A;const R=["hidden"],F=["disabled"],Z=(0,i._)("span",null,"Start",-1),E=[Z];function U(t,e,n,s,o,r){return(0,i.wg)(),(0,i.iD)("div",{hidden:t.inputDisabled},[(0,i._)("button",{class:"button is-primary is-responsive is-size-3",onClick:e[0]||(e[0]=(...t)=>r.onClick&&r.onClick(...t)),disabled:t.inputDisabled},E,8,F)],8,R)}var W={name:"StartButton",data:function(){return{inputDisabled:!1}},methods:{onClick:function(){this.$emit("clicked")},setStartButtonDisabled:function(){this.inputDisabled=!0},setStartButtonEnabled:function(){this.inputDisabled=!1}},emits:["clicked"]};const V=(0,$.Z)(W,[["render",U]]);var G=V;const H={class:"timer is-size-4"};function K(t,e,n,s,r,a){return(0,i.wg)(),(0,i.iD)("h1",H," Remaining: "+(0,o.zw)(t.remainingSeconds),1)}var Y={name:"TimerComponent",data:function(){return{remainingSeconds:null,timer:null}},emits:["activeEnded"],methods:{start:function(){clearInterval(this.timer),this.remainingSeconds=60,this.timer=setInterval((t=>{t.remainingSeconds--,0===t.remainingSeconds&&(clearInterval(this.timer),this.$emit("activeEnded"))}),1e3,this)}}};const L=(0,$.Z)(Y,[["render",K]]);var q=L,J={name:"App",components:{CounterComponent:T,InputNumber:k,ProblemComponent:B,StartButton:G,Timer:q},data:function(){return{answer:0,solution:1337,correct:0,remainingSeconds:null,inputDisabled:!0,personId:null,personDisplayName:null,mostRecentStats:[],topStatsToday:[],playing:!1}},methods:{checkAnswer:function(t){this.answer=t,this.answer==this.solution&&(this.answer="",this.correct++,this.setNewProblem())},setNewProblem:function(){this.solution=this.$refs.problem?.setNewProblem(),this.$refs.inputAnswer.resetInput()},stop:async function(){this.playing=!1,this.$refs.inputAnswer?.setInputFieldDisabled(),this.$refs.startButton.setStartButtonEnabled(),console.log("Game is over."),this.personId&&(await this.saveScore(),await this.$refs.stats.fetchScore(this.personId,30))},start:async function(){console.log("Game is starting."),this.playing=!0,this.correct=0,this.$refs.timer.start(),this.$refs.inputAnswer?.setInputFieldActive(),this.$refs.startButton.setStartButtonDisabled(),this.setNewProblem()},saveScore:async function(){console.log(`Saving score... for ${this.personId}`);const t=await fetch(`api/postStatistics?person=${this.personId}&result=${this.correct}`,{method:"POST"});console.log(t.status),console.log("Saved."),window.location.replace(`/stats?personId=${this.personId}`)}},mounted:async function(){const t=await fetch("/.auth/me"),e=await t.json();if(!e||!e.clientPrincipal)return console.log("No user logged in."),void window.location.replace("/.auth/login/aad");console.log(e),this.personId=e.clientPrincipal.userId,this.personDisplayName=e.clientPrincipal.userDetails,console.log(this.personId)}};const Q=(0,$.Z)(J,[["render",y]]);var X=Q;const tt=t=>((0,i.dD)("data-v-07767462"),t=t(),(0,i.Cn)(),t),et={class:"navbar is-primary is-flex is-align-items-center is-size-5"},nt={class:"navbar-brand"},st=tt((()=>(0,i._)("a",{class:"navbar-item",href:"/"}," Home ",-1))),it=["href"],ot={class:"navbar-item"},rt=tt((()=>(0,i._)("div",{class:"navbar-menu"},[(0,i._)("div",{class:"navbar-start"}),(0,i._)("div",{class:"navbar-end"})],-1)));function at(t,e,n,s,r,a){const l=(0,i.up)("TableComponent");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("nav",et,[(0,i._)("div",nt,[st,(0,i._)("a",{class:"navbar-item",href:t.personId?"/stats?personId="+t.personId:"/stats"}," Stats ",8,it),(0,i._)("p",ot,(0,o.zw)(this.personId?.substring(0,15)),1)]),rt]),(0,i._)("div",null,[(0,i.Wm)(l,{ref:"stats",title:"Your recent scores",personId:t.personId,stats:t.mostRecentStats},null,8,["personId","stats"])])])}const lt={id:"table",class:"mt-2 container"},ct={class:"column is-6",style:{width:"fit-content"}},ut={class:"column is-6"};function dt(t,e,n,s,a,l){return(0,i.wg)(),(0,i.iD)("div",lt,[(0,i.wy)((0,i._)("div",null," No results found ",512),[[r.vShow,0===t.stats.length&&t.fetched]]),(0,i._)("section",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.stats,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.RowKey,class:"is-size-4 columns is-mobile is-centered mt-4",style:(0,o.j5)({color:"rgb("+Math.max(0,255-10*parseInt(t.Result["_"]))+","+Math.min(255,10*parseInt(t.Result["_"]))+",0)"})},[(0,i._)("div",ct,(0,o.zw)(new Date(t.Timestamp["_"]).getDate()+"/"+(parseInt(new Date(t.Timestamp["_"]).getMonth())+1))+" : ",1),(0,i._)("div",ut,(0,o.zw)(t.Result["_"]),1)],4)))),128))])])}var pt={name:"TableComponent",components:{},props:{personId:{type:String,default:""},showLink:{type:Boolean,default:!1}},data:()=>({stats:[],fetched:!1}),methods:{fetchScore:async function(t,e=30){console.log(`Fetching score for ${t} ...`);const n=await fetch(`api/getStatistics?person=${t}&numberOfDays=${e}`);let s=await n.json();this.stats=s.sort(((t,e)=>Date.parse(e.Timestamp["_"])-Date.parse(t.Timestamp["_"]))),this.fetched=!0,console.log("Fetched.")}}};const mt=(0,$.Z)(pt,[["render",dt],["__scopeId","data-v-644e744b"]]);var ht=mt,ft={name:"StatsComponent",components:{TableComponent:ht},data:function(){return{mostRecentStats:[],waitSeconds:5,personId:"",timer:null}},methods:{start:function(){clearInterval(this.timer),this.waitSeconds=1,this.timer=setInterval((t=>{t.waitSeconds--,0===t.waitSeconds&&(clearInterval(this.timer),this.$refs.stats.fetchScore(this.personId,100))}),1e3,this)}},mounted:function(){this.personId=new URLSearchParams(window.location.search).get("personId"),this.personId&&this.$refs.stats.fetchScore(this.personId,100)}};const vt=(0,$.Z)(ft,[["render",at],["__scopeId","data-v-07767462"]]);var bt=vt;n(235);const wt={template:"<p>Page not found</p>"},gt=[{path:"/",component:X},{path:"/stats",component:bt}],It={data:()=>({currentRoute:window.location.pathname}),computed:{CurrentComponent(){return gt.filter((t=>this.currentRoute==t.path))[0].component||wt}},render(){return(0,s.h)(this.CurrentComponent)}};(0,s.ri)(It).mount("#app")}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,s,i,o){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],o=t[u][2];for(var a=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(n.O).every((function(t){return n.O[t](s[l])}))?s.splice(l--,1):(a=!1,o<r&&(r=o));if(a){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,i,o]}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,o,r=s[0],a=s[1],l=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)var u=l(n)}for(e&&e(s);c<r.length;c++)o=r[c],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(u)},s=self["webpackChunkmath"]=self["webpackChunkmath"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(588)}));s=n.O(s)})();
//# sourceMappingURL=app.65512f75.js.map